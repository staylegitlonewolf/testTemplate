(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{1543:function(e,t,r){Promise.resolve().then(r.bind(r,6656))},6656:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),o=r(2265),a=r(8837),i=r(4131);function c(){let[e,t]=(0,o.useState)("Processing authentication...");(0,o.useEffect)(()=>{r()},[]);let r=async()=>{try{let e=(0,a.j9)(),r=e.auth.parseFromUrl();if(r.error){t("Authentication error: ".concat(r.errorDescription||r.error)),setTimeout(()=>{window.location.href="/"},3e3);return}if(!r.code||!r.state){t("No authorization code or state received"),setTimeout(()=>{window.location.href="/"},3e3);return}t("Exchanging code for tokens...");let n=localStorage.getItem("wixOAuthData");if(!n){t("OAuth data not found. Please try logging in again."),setTimeout(()=>{window.location.href="/"},3e3);return}let o=JSON.parse(n),c=await e.auth.getMemberTokens(r.code,r.state,o);i.Z.set("session",JSON.stringify(c),{expires:7}),localStorage.removeItem("wixOAuthData"),t("Authentication successful! Redirecting..."),setTimeout(()=>{window.location.href="/"},2e3)}catch(e){console.error("Error processing callback:",e),t("Authentication failed. Please try again."),localStorage.removeItem("wixOAuthData"),setTimeout(()=>{window.location.href="/"},3e3)}};return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-lg text-gray-700",children:e})]})})}},8837:function(e,t,r){"use strict";r.d(t,{j9:function(){return c},kS:function(){return l},ts:function(){return s},x4:function(){return u}});var n=r(542),o=r(2849),a=r(7712),i=r(4131);let c=()=>(0,n.e)({modules:{members:a.Tq},auth:(0,o.n)({clientId:"",tokens:JSON.parse(i.Z.get("session")||'{"accessToken": {}, "refreshToken": {}}')})}),s=async()=>{try{let e=c();return await e.members.getCurrentMember()}catch(e){return console.error("Error getting current user:",e),null}},u=async()=>{try{let e=c(),t=e.auth.generateOAuthData("".concat(window.location.origin,"/auth/callback"),window.location.href);localStorage.setItem("wixOAuthData",JSON.stringify(t));let{authUrl:r}=await e.auth.getAuthUrl(t);window.location.href=r}catch(e){console.error("Error during login:",e)}},l=async()=>{try{i.Z.remove("session"),localStorage.removeItem("wixOAuthData"),window.location.href="/"}catch(e){console.error("Error during logout:",e)}}}},function(e){e.O(0,[583,971,117,744],function(){return e(e.s=1543)}),_N_E=e.O()}]);